{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport uuid from 'uuid/v4';\nimport { isEqual } from 'lodash-es';\nimport { attempt } from 'lodash-es';\nimport isImmutable from 'is-immutable';\nimport immutableEqual from 'immutable-is';\nimport { Provider } from '../SeriesContext';\nimport { getNonEventHandlerProps, getEventsConfig } from '../../utils/events';\nimport getModifiedProps from '../../utils/getModifiedProps';\nimport { logSeriesErrorMessage } from '../../utils/warnings';\n\nvar Series =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Series, _Component);\n\n  function Series(props) {\n    var _this;\n\n    _classCallCheck(this, Series);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Series).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"getSeriesConfig\", function () {\n      var _this$props = _this.props,\n          id = _this$props.id,\n          data = _this$props.data,\n          requiresAxis = _this$props.requiresAxis,\n          getAxis = _this$props.getAxis,\n          children = _this$props.children,\n          rest = _objectWithoutProperties(_this$props, [\"id\", \"data\", \"requiresAxis\", \"getAxis\", \"children\"]);\n\n      var seriesId = typeof id === 'function' ? id() : id;\n      var seriesData = isImmutable(data) ? data.toJS() : data;\n      var nonEventProps = getNonEventHandlerProps(rest);\n      var events = getEventsConfig(rest);\n\n      var config = _objectSpread({\n        id: seriesId,\n        data: seriesData,\n        events: events\n      }, nonEventProps);\n\n      if (requiresAxis) {\n        var axis = getAxis();\n        config[axis.type] = axis.id;\n      }\n\n      return config;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"createSeries\", function () {\n      var chart = _this.props.getChart(); // Create Highcharts Series\n\n\n      var opts = _this.getSeriesConfig();\n\n      _this.series = chart.addSeries(opts, false);\n    });\n\n    if (process.env.NODE_ENV === 'development') {\n      var type = props.type,\n          getHighcharts = props.getHighcharts;\n      var seriesTypes = Object.keys(getHighcharts().seriesTypes);\n      if (seriesTypes.indexOf(type) === -1) logSeriesErrorMessage(type);\n    }\n\n    return _this;\n  }\n\n  _createClass(Series, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props2 = this.props,\n          visible = _this$props2.visible,\n          data = _this$props2.data,\n          rest = _objectWithoutProperties(_this$props2, [\"visible\", \"data\"]);\n\n      var needsRedraw = false; // Using setData is more performant than update\n\n      if (isImmutable(data) && immutableEqual(data, prevProps.data) === false) {\n        this.series.setData(data.toJS(), false);\n        needsRedraw = true;\n      } else if (isEqual(data, prevProps.data) === false) {\n        this.series.setData(data, false);\n        needsRedraw = true;\n      }\n\n      if (visible !== prevProps.visible) {\n        this.series.setVisible(visible, false);\n        needsRedraw = true;\n      }\n\n      var modifiedProps = getModifiedProps(prevProps, rest);\n\n      if (modifiedProps !== false) {\n        this.series.update(modifiedProps, false);\n        needsRedraw = true;\n      }\n\n      if (needsRedraw) {\n        this.props.needsRedraw();\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.needsRedraw();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.series && this.series.remove) {\n        // Series may have already been removed, i.e. when Axis unmounted\n        attempt(this.series.remove.bind(this.series), false);\n        this.props.needsRedraw();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.series) this.createSeries();\n      return React.createElement(Provider, {\n        value: this.series\n      }, this.props.children);\n    }\n  }]);\n\n  return Series;\n}(Component);\n\n_defineProperty(Series, \"defaultProps\", {\n  type: 'line',\n  id: uuid,\n  children: null,\n  data: [],\n  requiresAxis: true,\n  visible: true\n});\n\nexport default Series;","map":null,"metadata":{},"sourceType":"module"}